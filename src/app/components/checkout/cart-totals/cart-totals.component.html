<div class="cart-totals-container">
  <h2>Ãœbersicht</h2>

  @if (!hasItem) {
    <div class="empty-cart">Your cart is empty</div>
  }

  @if (mainCartItem(); as mainItem) {
    <div class="cart-items">
      <div class="cart-item">
        <div class="cart-item-header">
          {{ mainItem.name }}
        </div>

        <div class="cart-item-details">
          @if (mainItemIsVariable()) {
            <div class="cart-item-detail">
              <span class="detail-label">{{ variation?.attribute }}:</span>
              <span
                class="detail-value"
                [innerHTML]="variation?.value | safeHtml"
              ></span>
            </div>
          }

          <div class="cart-item-detail">
            <span class="detail-label">Kostenbeitrag:</span>
            <span class="detail-value">{{
              mainItem.totals.line_subtotal | formatWcCartPrice: mainItem.totals
            }}</span>
          </div>

          <div class="cart-item-detail">
            <span class="detail-label">{{ ticketCategory }}</span>
            @if (crossSaleCartItem(); as crossSaleItem) {
              <span class="detail-value"
                >+{{
                  crossSaleItem.totals.line_subtotal
                    | formatWcCartPrice: crossSaleItem.totals
                }}</span
              >
            }
          </div>

          @for (coupon of cartCoupons(); track coupon.code) {
            <div class="cart-item-detail">
              <span class="detail-label">Coupon: {{ coupon.code }}</span>
              <span class="detail-value"
                >-{{
                  coupon.totals.total_discount
                    | formatWcCartPrice: coupon.totals
                }}</span
              >
            </div>
          }
        </div>
      </div>
    </div>
  }

  @if (cartTotals(); as totals) {
    <div class="totals-section">
      <div class="totals-row total">
        <span>Gesamt:</span>
        <span>{{ totals.total_price | formatWcCartPrice: totals }}</span>
      </div>
    </div>
  }
</div>
